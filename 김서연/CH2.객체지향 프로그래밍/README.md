# 영화 예매 시스템
- 영화, 상영
- 할인 정책, 할인 조건 -> 할인
- 예매 정보 (제목, 상영정보, 인원, 정가, 결제금액)


# 객체 지향 프로그래밍을ㅇ향해
## 협력, 객체, 클래스
- 1. 어떤 클래스가 필요한지를 고민하기 전에, 어떤 객체들이 필요한지 고민해라. 어떤 객체들이 어떤 상태와 행동을 가지는지를 먼저 결정해야 한다.
- 2. 객체를 독립적인 존재가 아니라 기능을 구현하기 위해 협력하는 공동체의 일원으로 봐야 한다. 

## 도메인의 구조를 따르는 프로그램 구조
- **도메인** : 문제를 해결하기 위해 사용자가 프로그램을 사용하는 분야
- 요구사항과 프로그램을 객체라는 동일한 관점에서 바라볼 수 있기 떄문에, 도메인을 구성하는 개념들이 프로그램의 객체와 클래스로 매끄럽게 연결될 수 있다.
- 일반적으로 클래스의 이름은 대응되는 도메인 개념의 이름과 동일하거나, 적어도 유사하게 지어야 한다.
- 영화 `Movie` 상영 `Screening` 
- 할인정책 `DiscountPolicy` 금액할인정책 `AmountDiscountPolicy`, 비율할인정책 `PercentDiscountPolicy`
- 할인 조건 `DiscountCondition` 순번 조건 `SequenceCondition`, 기간 조건 `PeriodCondition` 
- 예매 `Reservation`

## 클래스 구현하기
### Screening 클래스만들기
  - 인스턴스 변수의 가시성은 private, 메서드의 가시성은 public
  - 클래스를 구현하거나, 다른 개발자에 의해 개발된 클래스를 사용할 때 가장 중요한 것은 클래스의 경계를 구분 짓는 것.
  - 외부에서는 객체의 속성에 직접 접근할 수 없도록 막고, 적절한 public 메서드를 통해서만 내부 상태를 변경할수 있게 해야 한다.
  - 이렇게 내부와 외부를 구분하는 이유? -> `객체의 자율성을 보장하기 때문` 

### 자율적인 객체
- 객체는 상태(state) 와 행동(behavior)를 함께 가지는 복합적인 존재이다.
- 객체는 스스로 판단하고 행동하는 자율적인 존재이다.
- 데이터와 기능을 객체 내부로 함께 묶는 것을 `캡슐화` 라고 한다.
- 대부분의 객체지향 프로그래밍 언어는 외부에서의 접근을 통제할 수 있는 `접근제어(access control)` 메커니즘도 함께 제공한다.
- 많은 프로그래밍 언어들은 접근 제어를 위해 public, protected, private 과 같은 `접근 수정자(access modifier)`를 제공한다.

### 인터페이스와 구현의 분리(seperation of interface and implementation)
- 외부에서 접근 가능한 부분 -> `퍼블릭 인터페이스(public interface)`
- 오직 내부에서만 접근 가능한 부분 -> `구현(implementation)`

### 프로그래머의 자유
- 프로그래머의 역할을 클래스 작성자(class creator) 와 클라이언트 프로그래머(client programmer)로 구분하는 것이 유용하다. 
- 클래스 작성자 : 새로운 데이터 타입을 프로그램에 추가
- 클라이언트 프로그래머 : 클래스 작성자가 추가한 데이터 타입을 사용
- 클래스 작성자는 클라이언트 프로그래머에 대한 영향을 걱정하지 않고도 내부 구현을 마은대로 변경할 수 있어야 한다 -> `구현은닉(implementation hiding)`

## 협력하는 객체들의 공동체
- 객체는 다른 객체의 인터페이스에 공개된 행동을 수행하도록 `요청(request)` 할 수 있다.
- 요청을 받은 객체는 자율적인 방법에 따라 요청을 처리한 후 `응답(response)` 한다.
- 이 처럼 수신된 메시지를 처리하기 위한 자신만의 방법을 `메서드(method)`라고 한다.
- 메시지와 메서드를 구분하는 것은 매우 중요하다. ->  `다형성(polymorphism) `.

# 할인 요금 구하기
## 할인 요금 계산을 위한 협력 시작하기
```
this.calculateMovieFee=(screening: Screening)=>_fee.minus(_discountPolicy.calculateDiscountAmount(screening));
```
- 위 코드에는 어떤 할인 정책을 사용할 것인지 결정하는 코드가 어디에도 존재하지 않는다. -> 단지 discountPolicy에게 메시지를 전달할 뿐이다.
- DiscountPolicy 는 할인 여부와 요금 계산에 필요한 전체적인 흐름은 정의하지만 실제로 요금을 계산하는 부분은 추상 메서드에게 위임한다.
- 이렇게, 부모 클래스에게 기본적인 알고리즘의 흐름을 구현하고 중간에 필요한 처리를 자식 클래스에게 위임하는 디자인 패턴을 [Template Moethod] 라고 부른다.
