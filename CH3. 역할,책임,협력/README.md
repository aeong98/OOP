# 1. 협력
## 영화 예매 시스템 돌아보기
- 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용을 **협력** 이라고 한다.
- 객체가 협력에 참여하기 위해 수행하는 로직은 **책임** 이라고 부른다.
- 객체들이 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 **역할** 을 구성한다.

## 협력 
- 객체지향 시스템은 자율적인 객체의 공동체이다.
- **메시지 전송(message sending)** 은 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이다.
- 메시지를 수신한 객체는 **메서드** 를 실행해 요청에 응답한다.
- 여기서 객체가 메시지를ㅈ처리할 방법을 스스로 선택한다는 점이 중요하다. 
- 결과적으로 객체를 자율적으로 만드는 가장 기본적인 방법은 내부 구현을 **캡슐화** 하는 것이다.
- ex) 영화 예제에서 Screening 이 요금을 계산하기 위해 Movie 의 내부 구현에 직접 접근하는 것 은 캡슐화의 원칙에 위배되는것이다.

## 협력이 설계를 위한 문맥을 결정한다.
- 결론적으로 객체의 행동을 결정하는 것은 객체가 참여하고 있는 협력이다.
- 객체의 행동을 결정하는 것이 협력이라면, 객체의 상태를 결정하는 것은 행동이다.
- 상태는 객체가 행동하는 데 필요한 정보에 의해 결정되고, 행동은 협력 안에서 객체가 처리할 메시지로 결정된다. 
- 결과적으로 **객체가 참여하는 협력이 객체를 구성하는 행동과 상태 모두를 결정한다.**
- 협력은 객체를 설계하는 데 필요한 일종의 **문맥(context)** 를 제공한다.

# 2. 책임
## 책임이란 무엇인가.
- 협력에 참여하기 위해 객체가 수행하는 행동
- 객체에 의해 정의되는 응집도 있는 행위의 집합으로, 객체가 유지해야하는 정보와 수행할 수 있는 행동에 대해 개략적으로 서술한 문장이다.
- 객체의 책임을 크게 **'하는 것(doing)'** 과 **'아는 것 (knowing)'** 두 가지 범주로 나누어 세분화하고 있다.
  - 하는 것 
    - 스스로 하는 것. 객체 생성
    - 다른 객체의 행동을 시작시키는 것
    - 다른 객체의 활동을 제어하고 조절하는 것
  - 아는 것
    - 사적인 정보에 관해 아는 것
    - 관련된 객체에 관해 아는 것
    - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

## 책임 할당
- 자율적인 객체를 만드는 가장 기본적인 방법은 책임을 수행하는 데 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당하는 것이다.
- 객체지향 설계는 협력에 필요한 메시지를 찾고 메시지에 적절한 객체를 선택하는 반복적인 과정을 통해 이뤄진다. 그리고 이런 메시지가 메시지를 수신할 객체의 책임을 결정한다.
- 이렇게 결정된 메시지가 객체의 퍼블릭 인터페이스를 구성한다.

## 책임 주도 설계
- 책임을 찾고, 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력하는 설계를 책임주도 설계라고 부른다.

## 메시지가 객체를 결정한다.
- 메시지가 객체를 선택하게 해야한다. 이유는 다음 두가지가 있다.
  - 1. 최소한의 인터페이스
    - 필요한 메시지가 식별될 때까지 객체의 퍼블릭 인터페이스에 어떤 것도 추가하지 않기때문에,적절한 크기의 퍼블릭 인터페이스를 가질 수 있다.
  - 2. 추상적인 인터페이스 
    - 무엇(what) 을 하는지는 표현해야하지만, 어떻게(how) 를 수행하는지는 노출해서는 안된다.

## 행동이 상태를 결정한다.
- 중요한 것은 객체의 상태가 아니라,행동이다.
- 협력이 객체의 행동을 결정하고, 행동이 상태를 결정한다. 그리고 그 행동이 객체의 책임이 된다.


# 3 역할
## 역할과 협력
- 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 **역할** 이라고 부른다.
- 실제로 협력을 모델링할때는 특정한 객체가 아니라, 역할에게 책임을 할당한다고 생각하는게 좋다.

## 유연하고 재사용 가능한 협력
- [Movie] -> 할인요금을 계산하라 라는 메시지를 전송하는 경우
- [DiscountPolicy] 라는 대표잘르 협력 안에서 두 종류의 객체를 교대로 바꿔 끼울 수 있는 일종의 **슬롯** 으로 생각할 수 있다. 이 슬록이 바로 역할이다.

## 역할의 구현
- 역할을 구현하는 가장 일반적인 방법은 추상 클래스와 인터페이스를 사용하는 것이다.
- 협력의 관점에서 추상 클래스와 인터페이스는 구체 클래스들이 따라야 하는 책임의 집합을 서술한 것이다.

## 객체 대 역할
- 협력에 적합한 책임을 수행하는 대상이 한 종류라면, 간단하게 객체로 간주한다. 만약 여러 종류의 객체들이 참여할 수 있다면 역할이라고 부르면 된다.
- 협력(collaboration) => reference 역할(Role) => select from 객체(object) => instance of 클래스(Class)
- 역할을 설계의 중심 개념으로 보는 역할 모델링(Role Modeling) 개념을 제안 -> UML 에 큰 영향을 미치기도ㅇ했다.
- 역할의 가장 큰 장점의 설계의 구성 요소를 추상화할 수 있다는 것이다.

## 역할과 추상화
1. 추상화 계층을 이용하면 중요한 정책을 상위 수준에서 단순화할 수 있다.
2. 설계가 유연해진다. 
- 이런 추상화의 장점은 역할에도 동일하게 적용될 수 있다.